<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js"></script>

  <title>Document</title>
</head>

<body>
  <script>

    let envsId;

    let socket = new WebSocket('ws://' + window.location.host + '/');
    socket.addEventListener('error', function (m) {
      console.log("error");
    });
    socket.addEventListener('open', function (m) {
      console.log("websocket connection open");
    });
    socket.onmessage = function (event) {
      let data = JSON.parse(event.data);
      let message = _.get(data, 'message');
      let payload = _.get(data, 'payload');
      let envsId = _.get(data, 'envsId');

      console.log(payload)

    };

    let start_test = () => {
      console.log("Start test");
      socket.send(JSON.stringify({
        message: 'start_test',
        payload: {
          envsId,
          test: 'testGlob',
          envs: ["settings/settings/envCloud.yaml"],
        }
      }));
    }
  </script>
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    .wrapper {
      height: 100%;
      display: grid;
      grid-template-columns: minmax(100px, auto) 1fr minmax(100px, auto);
      grid-template-areas:
        "header header header"
        "testLists testFlow testDetails"
        "footer footer footer";
      grid-auto-rows: minmax(30px, auto) 1fr minmax(30px, auto);
    }

    .header {
      grid-area: header;
      background-color: rgb(144, 122, 122);
      /* grid-column: 1 / 4; */
      /* grid-auto-rows: 1; */
    }

    .footer {
      grid-area: footer;
      background-color: rgb(42, 165, 69);
      /* grid-column: 1 / 4; */
      /* grid-auto-rows: 1; */
    }

    .testLists {
      grid-area: testLists;
      background-color: aquamarine;
      /* grid-column: 1; */
      /* grid-auto-rows: 2 / 3; */
    }

    .testData {
      grid-area: testData;
      background-color: rgb(147, 165, 42);
      /* grid-column: 2; */
      /* grid-auto-rows: 2; */
    }

    .testFlow {
      grid-area: testFlow;
      background-color: rgb(165, 42, 155);
      /* grid-column: 2; */
      /* grid-auto-rows: 3; */
    }

    .testDetails {
      grid-area: testDetails;
      background-color: rgb(42, 85, 165);
      /* grid-column: 2; */
      /* grid-auto-rows: 3; */
    }

    .compiledData {
      grid-area: compiledData;
      background-color: rgb(165, 147, 42);
      /* grid-column: 3; */
      /* grid-auto-rows: 2; */
    }

    .compiledSelectors {
      grid-area: compiledSelectors;
      background-color: rgb(152, 195, 190);
      /* grid-column: 3; */
      /* grid-auto-rows: 3; */
    }
  </style>

  <div class="wrapper">
    <div class="header">HEADER</div>

    <div class="testLists">
      TEST LISTS
      <button onclick="start_test()">Старт теста</button>
      <button onclick="get_json()">Получить тесты</button>
    </div>
    <!-- <div class="testData">TEST DATA</div> -->
    <div class="testFlow">
      TEST FLOW
      <button onclick="start_test()">Инициировать тест</button>
      <button onclick="get_test()">Получить данные теста</button>
    </div>
    <div class="testDetails">
      <div class="compiledData">COMPILED DATA</div>
      <div class="compiledSelectors">COMPILED SELECTORS</div>
    </div>

    <div class="footer">FOOTER</div>
  </div>
  <!-- <input type="text"/> -->
  <!-- <button onclick="start_test()">Старт теста</button>
  <button onclick="get_json()">Получить JSON</button> -->
  <!-- <button onclick="start_test2()">Старт теста2</button> -->
  <!-- <button onclick="stop_test()">Стоп теста</button>
  <button onclick="stop_test2()">Стоп теста2</button> -->
</body>

</html>